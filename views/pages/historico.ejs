<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head'); %>
</head>
<body>

    <!-- <header>
        <%- include('../partials/header'); %>
    </header> -->

    <div class="container">
        <div class="header">
            <div class="left-header">
                <a class="previous" href="#" onclick="history.go(-1)">&laquo;</a> 
            </div>
            <div class="central-header">
                <div class="title">
                    Datos Historicos
                </div>
                <dif class="user_id">
                    <p><%= avatar %></p>
                </dif>
                 
            </div>
            <div class="right-header"></div>
        </div>
        <div class="contenido">
           <div id="map" class="map"></div> 
        </div>
        <div class="sidebar-1"> </div>
        <div class="sidebar-2"> </div>
        <div class="footer">footer</div>
    </div>
    <script src="./js/historico.js"></script>
    <script>
        var data = <%= tagline %>  //var test is now assigned to getTest which will only work on browsers
            //console.log(data);  // successfully prints 101 on browser

        var extent = <%= limit %>
        console.log(extent)

        var i,temp,lat,lon, geom, feature, features = [];
        // console.log(data)
        vectorSource.clear();
        for (i=0; i< data.length; i++){
            temp = data[i];
            lat = temp[1];
            lon = temp[0];
            //console.log([lon,lat])
            geom = new ol.geom.Point(
                ol.proj.transform([lon,lat], 'EPSG:4326', 'EPSG:3857')
            );
            feature = new ol.Feature(geom);
            // console.log(data[i].user_id);

            feature.set('name', data[i].user_id);
            //agregado timespan
            if (data[i].hasOwnProperty('timespan')){
            feature.set('timespan', data[i].timespan) 
            }
            
            features.push(feature);
        }
        vectorSource.addFeatures(features);

        map.getView().fit(extent,{maxZoom: 18});
       
    </script>

    <!-- <footer>
        <%- include('../partials/footer'); %>
    </footer> -->

</body>
</html>